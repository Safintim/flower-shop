{% extends 'admin/change_form.html' %}
{% load static %}

{% block admin_change_form_document_ready %}
{{ block.super }}
<script>
(function($) {

    function check_type() {
        var element = '{{ object.type }}'
        element = element || $('#id_type').val()
        if (element === 'BOUQUET') {
            $('#id_price').prop('readonly', true)
            $('#id_price').css('background', 'lightgrey')
            $('.field-get_small_bouquet_price').show()
            $('.field-get_middle_bouquet_price').show()
            $('.field-get_big_bouquet_price').show()
            $('.field-bouquets').show()
            $('.field-bouquets label').addClass('required')
            $('.field-bouquets select').prop('required', true);
        } else {
            $('.field-bouquets label').removeClass('required')
            $('.field-bouquets select').prop('required', false)
            $('#id_price').prop('readonly', false)
            $('#id_price').css('background', 'white')
            $('.field-get_small_bouquet_price').hide()
            $('.field-get_middle_bouquet_price').hide()
            $('.field-get_big_bouquet_price').hide()
            $('.field-bouquets').hide()
        }
    }
    check_type()
    $('#id_type').on('change', function () {
        check_type()
    })
})(django.jQuery);
</script>
{% endblock %}